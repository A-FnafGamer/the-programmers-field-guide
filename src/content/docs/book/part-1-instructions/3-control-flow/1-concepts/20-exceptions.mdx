---
title: Handling Errors
---

See how exceptions are used in C# to manage and work with errors, and learn to handle these to keep your program going when things go wrong.

Standard control flow mechanisms provide a way of structuring the code you use as the core logic of your program. This control flow can become overly complicated if it also needed to deal with handling all of the potential issues that may occur.

To deal with this, modern programming languages often include exception handling features that focus on providing an alternate control flow mechanism that keeps this error handling code to the side of the core logic.

At its core, Exceptions are objects that can be **thrown** when an error occurs, and **caught** in specific sections designed to handle these errors.

A thrown exception skips over other control flow structures and ends methods as its jumps over code until it finds a catch, or it kills the program. The following code demonstrates how an exception can be thrown.

```cs
public class Program
{
  public static void Main()
  {
    Console.WriteLine("Start");
    DoSomethingWithAnError();
    Console.WriteLine("End");
  }

  public static void DoSomethingWithAnError()
  {
    Console.WriteLine("Start doing something...");
    throw new Exception("There was an error");
    Console.WriteLine("End doing something...");
  }
}
```

The above code will print the start message in main, and the start message in `DoSomethingWithAnError`. But does not print either of the "end" messages, before it ends by crashing due to an unhandled exception.

When the exception is thrown, the standard sequence ends and the exception takes control. It will start to skip over the instructions in `DoSomethingWithAnError` looking for a catch.

As there is no error handling here the method terminates, and the exception returns to the call in `Main`, and the process continues. Main does not have a catch either, so it ends and the program terminates.

When a program terminates with an exception, this indicates that something went wrong. So the operating system may prompt you so that you know things didn't end well.

### Catching an Exception

To handle exceptions you need to add a **catch** block, which can catch the exception and have any code needed to progress after the error.

```cs
public class Program
{
  public static void Main()
  {
    try
    {
      Console.WriteLine("Start");
      DoSomethingWithAnError();
      Console.WriteLine("End");
    } catch ( Exception e )
    {
      Console.WriteLine(e.Message);
    }

    Console.WriteLine("The Very End");
  }

  public static void DoSomethingWithAnError()
  {
    Console.WriteLine("Start doing something...");
    throw new Exception("There was an error");
    Console.WriteLine("End doing something...");
  }
}
```

The catch block starts with a **try**, which contains the code you want to _try_ to perform. Following the try block is a catch which will only be executed when it catches an exception.

When the above code runs, it will now print the two start messages, before the exception is thrown. This time however, the exception will end `DoSomethingWithAnError`, and then be caught in the catch block back in main.

Once caught, the program continues as normal. So the program will print out the message from within the exception, and then print "The Very End".

### Where to place try and catch

The main thing with exception handling is to learn where to place the try and catch blocks. In general you want to ensure that the try wraps all of the code you want skipped when the error does occur.

Notice in the above code that the "End" message in `Main` is not displayed. It is skipped by the exception.

Also notice that "The Very End" message would be printed both when an error occurs, and when it does not. Remember that the catch block is skipped when the _try_ runs successfully.

### Further Reading

For additional reading see:

* [How and when to use exceptions](https://www.microsoft.com/net/tutorials/csharp/getting-started/exceptions) Microsoft Tutorial
* [Exceptions](https://en.wikibooks.org/wiki/C_Sharp_Programming/Exceptions) in the online C# Programming text.
* [Exceptions](https://msdn.microsoft.com/en-us/library/ms173160.aspx) in The C# Programming Guide and the related sections.

For help with syntax details, see this week's [syntax guide](../23-syntax-guide).

### Your Task

In general, you should try to avoid throwing exceptions. Why do you think this is? Let us know in the comments.
